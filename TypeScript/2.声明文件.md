# 声明文件

## 参考文档
- [TypeScript 的两种声明文件写法的区别和根本意义](https://my.oschina.net/fenying/blog/747184)

TypeScript 的 DefinitelyTyped 声明文件有两种写法，一种叫做 全局类型声明(Global Type Definition)，另一个则是叫做 模块导出声明(External Module Definition)。

## 划重点
NPM 模块里面的内建声明文件必须使用模块导出声明写法。因为任何一个 Node.js 的模块都是必须依靠 require 加载的才能通过字段引用的方式 使用里面的名称，即是说 一个模块无法真正地将任何名称引入全局的命名空间中，所以不应该也不能在一个模块的内建声明文件里使用全局声明写法！

## 全局类型声明
如果你的模块需要将新的名称引入全局命名空间，那么就应该使用全局声明。  
TypeScript 文件是在浏览器上通过```<script>```标签加载的，那么里面的 变量、函数等都会被引入到全局命名空间中，这时候就需要为这个文件写一份全局类型声明了
```
declare let appStartedTime: Date;
declare namespace NodeJS {
  export interface Error {
    "name": string;
  }
}

```

深层模块声明：
```
declare module "sample/lib1" {
  export let name: number;
}

declare module "sample/lib2" {
  export let value: number;
}

declare module "sample" {
  export * from "sample/lib1";
  export * from "sample/lib2";
}
```

## 模块导出声明
如果你的模块无需将新的名称引入全局命名空间，那么就应该使用模块导出声明。  
模块导出声明里的名称必须通过 import/require 才能使用。

## 举个例子
以一个名为 abc 的模块为例，TS源代码如下：
```
export function abc(s: string): string {
  return s.substr(0, 4);
}
```
- 全局类型声明写法
```
declare module "abc" {
  interface funcAbcSign {
    (s: string): string
  }

  export let abc: funcAbcSign;
}
```

- 模块导出声明写法
```
declare interface funcAbcSign {
  (s: string): string
}

export declare let abc: funcAbcSign;
```